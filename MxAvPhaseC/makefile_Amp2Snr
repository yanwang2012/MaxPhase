# Makefile
# Yiqian-Qian 06/24/2019.

OBJ = Amp2Snr.o perfeval_omp.o  LLR_Mp_Av.o  maxphaseutils.o ptapso.o gslhdf5_io.o
CC = gcc-9 -O3 -fopenmp
GSLFLAGS :=  /usr/local/Cellar/gsl/2.5/include
GSLLIBS := /usr/local/Cellar/gsl/2.5/lib
HDF5FLAGS := /usr/local/Cellar/hdf5/1.10.5_1/include
HDF5LIBS := /usr/local/Cellar/hdf5/1.10.5_1/lib

Amp2Snr.exe: $(OBJ)
	$(CC) $(OBJ)  -L$(HDF5LIBS) -lhdf5 -lhdf5_hl -lz -L$(GSLLIBS) -lm -lgsl -lgslcblas -o Amp2Snr.exe

Amp2Snr.o: Amp2Snr.c
	$(CC) -c  -I$(HDF5FLAGS) -I$(GSLFLAGS) Amp2Snr.c

gslhdf5_io.o: gslhdf5_io.c
	$(CC) -c -I$(HDF5FLAGS) -I$(GSLFLAGS) gslhdf5_io.c

perfeval_omp.o: perfeval_omp.c
	$(CC) -c -I$(HDF5FLAGS) -I$(GSLFLAGS) perfeval_omp.c

LLR_Mp_Av.o: LLR_Mp_Av.c
	$(CC) -c LLR_Mp_Av.c -I$(GSLFLAGS)

maxphaseutils.o: maxphaseutils.c
	$(CC) -c maxphaseutils.c -I$(GSLFLAGS)

ptapso.o: ptapso.c
	$(CC) -c ptapso.c -I$(GSLFLAGS)

.PHONY:clean
clean:
	rm -f *.o
	echo Clean Done!
# EOF
